BEGIN BFSMK

CHAIN IF WEIGHT #-1 ~Global("BFSMkIntro","GLOBAL",0)~ THEN BFSMK BFSMk.Intro
@0
DO ~SetGlobal("BFSMkIntro","GLOBAL",1)~
== BFSGOB @1
== BFSMK @2 
== BFSGOB @3
== BFSMK @4
== BFSMK @5 
END
++ @6 EXTERN BFSMK BFSMk2.OldFriend 
++ @7 EXTERN BFSMK BFSMk2.StrangerDanger
++ @8 EXTERN BFSMK BFSMk2.LeaveMeAlone

CHAIN BFSMK BFSMk2.LeaveMeAlone
@9 DO ~ActionOverride("BFSGB2",DestroySelf()) ActionOverride("BFSGOB",DestroySelf()) EscapeArea()~
EXIT

/* bg2 start */ 
CHAIN BFSMK BFSMk2.StrangerDanger
@10 
END
++ @11 EXTERN BFSMK BFSMk2.MoveAlong
++ @12 EXTERN BFSMK BFSMk2.MoveAlong
++ @13 EXTERN BFSMK BFSMk2.MoveAlong

CHAIN BFSMK BFSMk2.MoveAlong
@14 
END
++ @15 EXTERN BFSMK BFSMk2.GobbosWhy
++ @16 EXTERN BFSMK BFSMk2.KillingTime
++ @17 EXTERN BFSMK BFSMk2.CityMean
+ ~OR(2) Class(Player1,RANGER_ALL) Class(Player1,DRUID_ALL)~ + @18 EXTERN BFSMK BFSMk2.NoPlaceForGobbos

CHAIN BFSMK BFSMk2.NoPlaceForGobbos
@19
END
IF ~~ EXTERN BFSMK BFSMk2.GobbosWhy

CHAIN BFSMK BFSMk2.CityMean
@20 
END
IF ~~ EXTERN BFSMK BFSMk2.GobbosWhy

CHAIN BFSMK BFSMk2.GobbosWhy
@21 
= @22
END
IF ~~ EXTERN BFSMK BFSMk2.TheOnlyGoodGoblin

CHAIN BFSMK BFSMk2.TheOnlyGoodGoblin
@23
END
++ @24 EXTERN BFSMK BFSMk2.TeamUp
++ @25 EXTERN BFSMK BFSMk2.NoTeamUp
++ @26 EXTERN BFSMK BFSMk2.KillingTime
+ ~OR(2) Class(Player1,DRUID_ALL) Class(Player1,CLERIC_ALL)~ + @27 EXTERN BFSMK BFSMk2.TwoHeads
+ ~Class(Player1,SHAMAN)~ + @28 EXTERN BFSMK BFSMk2.TwoHeads

CHAIN BFSMK BFSMk2.TwoHeads
@29 
END
++ @30 EXTERN BFSMK BFSMk2.IsADeadOne
++ @25 EXTERN BFSMK BFSMk2.NoTeamUp
++ @26 EXTERN BFSMK BFSMk2.KillingTime

CHAIN BFSMK BFSMk2.NoTeamUp
@31
= @32 DO ~ActionOverride("BFSGB2",DestroySelf()) ActionOverride("BFSGOB",DestroySelf()) EscapeArea()~
EXIT

CHAIN BFSMK BFSMk2.TeamUp
@33 
END 
++ @34 EXTERN BFSMK BFSMk2.IsADeadOne
++ @25 EXTERN BFSMK BFSMk2.NoTeamUp
++ @26 EXTERN BFSMK BFSMk2.KillingTime

CHAIN BFSMK BFSMk2.IsADeadOne
@35 
== BFSGOB @36
== BFSMK @37
== BFSGB2 @38
END
++ @39 EXTERN BFSMK BFSMk2.JoinUs
++ @40 EXTERN BFSMK BFSMk2.JoinUs

CHAIN BFSMK BFSMk2.JoinUs
@41
DO ~AddJournalEntry(@100001, QUEST) JoinParty()~ 
EXIT

CHAIN BFSMK BFSMk2.KillingTime
@42 DO ~ActionOverride("BFSGB2",Enemy()) ActionOverride("BFSGOB",Enemy()) Enemy()~
EXIT

/* sod continuation */ 
CHAIN BFSMK BFSMk2.OldFriend
@43 
DO ~SetGlobal("BFSMkSoDKnown","GLOBAL",1)~
= @44 
= @45 
END
++ @46 EXTERN BFSMK BFSMk2.GladYouWerent
++ @47 EXTERN BFSMK BFSMk2.GladYouWerent
++ @48 EXTERN BFSMK BFSMk2.NoTeamUp

CHAIN BFSMK BFSMk2.GladYouWerent
@49 
= @50  
== BFSGB2 @51
== BFSMK @52
END
++ @53 EXTERN BFSMK BFSMk2.TeamUp2
++ @54 EXTERN BFSMK BFSMk2.LeaveMeAlone

CHAIN BFSMK BFSMk2.TeamUp2
@55
= @56 
END
++ @57 EXTERN BFSMK BFSMk2.IsADeadOne2

CHAIN BFSMK BFSMk2.IsADeadOne2
@58 
== BFSGOB @36
== BFSMK @59
== BFSGB2 @38
== BFSGOB @60
END
++ @39 EXTERN BFSMK BFSMk2.JoinUs
++ @40 EXTERN BFSMK BFSMk2.JoinUs

